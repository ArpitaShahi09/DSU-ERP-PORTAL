<!-- timetable.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Exam Timetable</title>
  <link rel="stylesheet" href="exam.css">
</head>
<body>
  <div class="exam-container">
    <h2>Exam Timetable</h2>
    <table id="timetable-table" class="styled-table"></table>
  </div>
<script>
  const params = new URLSearchParams(window.location.search);
  const userid = params.get('userid');

  fetch(`/api/exam/timetable?userid=${userid}`)
    .then(res => res.json())
    .then(data => {
      const table = document.getElementById('timetable-table');

      // Table headers
      let thead = '<thead><tr><th>Date</th><th>Time</th><th>Subject</th></tr></thead>';

      // Table body
      let tbody = '<tbody>' + data.map(row => {
        const dateObj = new Date(row.exam_date);
        const formattedDate = `${String(dateObj.getDate()).padStart(2, '0')}-${String(dateObj.getMonth() + 1).padStart(2, '0')}-${dateObj.getFullYear()}`;
        return `<tr>
                  <td>${formattedDate}</td>
                  <td>${row.time_slot}</td>
                  <td>${row.subject}</td>
                </tr>`;
      }).join('') + '</tbody>';

      table.innerHTML = thead + tbody;
    })
    .catch(error => {
      console.error('Error fetching timetable:', error);
    });
</script>


</body>
</html>
